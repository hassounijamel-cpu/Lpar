-- واجهة قابلة للسحب جميلة
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- إنشاء الـ ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NeymarSkyboxGUI"
ScreenGui.Parent = PlayerGui

-- إنشاء الإطار الرئيسي
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 450, 0, 220)
Frame.Position = UDim2.new(0.5, -225, 0.5, -110)
Frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15) -- أسود قاتم
Frame.BorderSizePixel = 0
Frame.Parent = ScreenGui
Frame.Active = true
Frame.Draggable = true

-- إضافة ظل خفيف للواجهة
local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(0, 50, 100) -- أزرق غامق
UIStroke.Thickness = 3
UIStroke.Parent = Frame

-- عنوان الواجهة
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -20, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 10)
Title.BackgroundTransparency = 1
Title.Text = "سكربت نيمار (حسنين) سكاي بوكس لماب بروك هافن"
Title.TextColor3 = Color3.fromRGB(200, 200, 200)
Title.Font = Enum.Font.SourceSansBold
Title.TextScaled = false
Title.TextSize = 20 -- نص أصغر قليلاً
Title.TextWrapped = true
Title.Parent = Frame

-- زر تفعيل السكربت
local Button = Instance.new("TextButton")
Button.Size = UDim2.new(0.6, 0, 0, 50)
Button.Position = UDim2.new(0.2, 0, 0.6, 0)
Button.BackgroundColor3 = Color3.fromRGB(0, 50, 100) -- أزرق غامق
Button.TextColor3 = Color3.fromRGB(255, 255, 255)
Button.Text = "فعل سكاي بوكس"
Button.Font = Enum.Font.SourceSansBold
Button.TextScaled = true
Button.Parent = Frame

-- تأثير Hover للزر
Button.MouseEnter:Connect(function()
    Button.BackgroundColor3 = Color3.fromRGB(0, 80, 160)
end)
Button.MouseLeave:Connect(function()
    Button.BackgroundColor3 = Color3.fromRGB(0, 50, 100)
end)

-- الكود عند الضغط على الزر
Button.MouseButton1Click:Connect(function()
    -- الكود اللي زودتني فيه للتفعيل
    local args = {
        {
            100839513065432
        }
    }
    game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("ChangeCharacterBody"):InvokeServer(unpack(args))

    local function missing(t, f, fallback)
        if type(f) == t then return f end
        return fallback 
    end

    cloneref = missing("function", cloneref, function(...) return ... end)
    local Services = setmetatable({}, {
        __index = function(_, name)
            return cloneref(game:GetService(name))
        end
    })

    local Players = Services.Players
    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")

    player.CharacterAdded:Connect(function(newCharacter)
        character = newCharacter
        humanoid = character:WaitForChild("Humanoid")
    end)

    local Settings = {
        ["Fade In"] = 0.1,
        ["Fade Out"] = 0.1,
        ["Weight"] = 1,
        ["Speed"] = 1,
        ["Time Position"] = 0
    }

    local CurrentTrack

    local function LoadTrack(id)
        if CurrentTrack then 
            CurrentTrack:Stop(0) 
        end

        local animId
        local ok, result = pcall(function()
            return game:GetObjects("rbxassetid://" .. tostring(id))
        end)

        if ok and result and #result > 0 then
            local anim = result[1]
            if anim:IsA("Animation") then
                animId = anim.AnimationId
            else
                animId = "rbxassetid://" .. tostring(id)
            end
        else
            animId = "rbxassetid://" .. tostring(id)
        end

        local newAnim = Instance.new("Animation")
        newAnim.AnimationId = animId
        local newTrack = humanoid:LoadAnimation(newAnim)
        newTrack.Priority = Enum.AnimationPriority.Action4

        local weight = Settings["Weight"]
        if weight == 0 then weight = 0.001 end

        newTrack:Play(Settings["Fade In"], weight, Settings["Speed"])
        
        CurrentTrack = newTrack
        CurrentTrack.TimePosition = math.clamp(Settings["Time Position"], 0, 1) * CurrentTrack.Length

        return newTrack
    end

    local EmoteId = 101852027997337
    LoadTrack(EmoteId)
end)
